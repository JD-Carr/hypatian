<!-- templates/ajax/patients.jinja -->
{% extends "layout.jinja" %}

{% block content %}
<h1 class="display-4">Patients</h1>
<div id="toolbar"></div>
<div class="table-responsive">
<table id="data" class="table table-striped table-bordered table-hover" data-toggle="table" data-search="true" data-toolbar="#toolbar">
  <thead>
    <tr>
      <th data-field="nameFirst" data-sortable="true" scope="col">First Name</th>
      <th data-field="nameLast" data-sortable="true" scope="col">Last Name</th>
      <th data-field="dateOfBirth" data-sortable="true" scope="col">Date of Birth</th>
      <th data-field="age" data-sortable="true" scope="col">Age</th>
    </tr>
  </thead>
</table>
</div>
{% endblock %}

{% block datatable_scripts %}
<script>

$(document).ready(function() {
  $('#data').DataTable({
    ajax: {
      url: '{{ url_for('api.patients_get') }}',
      method: 'GET',
      dataType: 'json'
    },
      columns: [
        {data: "name_first"},
        {data: "name_last"},
        {data: "date_of_birth"},
        {data: "age"}
      ],
  });
});
</script>
{% endblock datatable_scripts %}
