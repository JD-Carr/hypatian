<!-- templates/demographics/patients.jinja -->
{% extends "layout.jinja" %}

{% block content %}
<h1 class="display-4">Patients</h1>
<div id="toolbar"></div>
<div class="table-responsive">
<table id="data" class="table table-striped table-bordered table-hover" data-toggle="table" data-search="true" data-toolbar="#toolbar">
  <thead>
    <tr class="table-info">
      <th data-field="name_first" data-sortable="true" scope="col">First Name</th>
      <th data-field="name_last" data-sortable="true" scope="col">Last Name</th>
      <th data-field="date_of_birth" data-sortable="true" scope="col">Date of Birth</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
</div> <!-- table-responsive -->
{% endblock %}

{% block datatable_scripts %}
<script type="text/javascript">
  $(document).ready(function() {
    $('#data').DataTable({
      ajax: {
        url: "{{ url_for('api.patients_get') }}",
        method: "GET",
        contentType: "application/json",
        dataType: "json"
      },
      columns: [
        {data: "name_first"},
        {data: "name_last"},
        {data: "date_of_birth"}
      ],
    });
  });
</script>
{% endblock datatable_scripts %}
